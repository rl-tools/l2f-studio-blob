function D(e,i,t=0){var a=new Map;for(let[r,n]of e.entries()){let s=v.unpack_from("<"+n,i,t);t+=v.calcsize(n),s.length==1&&(s=s[0]),a.set(r,s)}return a}function R(e){e||e()}function B(e){var i="<"+Array.from(e.values()).join("");return v.calcsize(i)}function Ee(e,i=8){return Math.ceil(e/i)*i}var Ga={u:"Uint",i:"Int",f:"Float"};function Ve(e){var i=v._is_big_endian(e),t,a;if(/S/.test(e))t="getString",a=((e.match(/S(\d*)/)||[])[1]||1)|0;else{let[r,n,s]=e.match(/[<>=!@]?(i|u|f)(\d*)/);a=parseInt(s||4,10);let _=a*8;t="get"+Ga[n]+_.toFixed()}return[t,i,a]}var Va=class{constructor(){this.big_endian=Ya(),this.getters={s:"getUint8",b:"getInt8",B:"getUint8",h:"getInt16",H:"getUint16",i:"getInt32",I:"getUint32",l:"getInt32",L:"getUint32",q:"getInt64",Q:"getUint64",e:"getFloat16",f:"getFloat32",d:"getFloat64"},this.byte_lengths={s:1,b:1,B:1,h:2,H:2,i:4,I:4,l:4,L:4,q:8,Q:8,e:2,f:4,d:8};let e=Object.keys(this.byte_lengths).join("");this.fmt_size_regex="(\\d*)(["+e+"])"}calcsize(e){for(var i=0,t,a=new RegExp(this.fmt_size_regex,"g");(t=a.exec(e))!==null;){let r=parseInt(t[1]||1,10),n=t[2],s=this.byte_lengths[n];i+=r*s}return i}_is_big_endian(e){var i;return/^</.test(e)?i=!1:/^(!|>)/.test(e)?i=!0:i=this.big_endian,i}unpack_from(e,i,a){for(var a=Number(a||0),r=new Ae(i,0),n=[],s=this._is_big_endian(e),_,d=new RegExp(this.fmt_size_regex,"g");(_=d.exec(e))!==null;){let o=parseInt(_[1]||1,10),c=_[2],f=this.getters[c],h=this.byte_lengths[c];if(c=="s")n.push(new TextDecoder().decode(i.slice(a,a+o))),a+=o;else for(var l=0;l<o;l++)n.push(r[f](a,!s)),a+=h}return n}},v=new Va;function Ya(){let e=new Uint8Array(4),i=new Uint32Array(e.buffer);return!((i[0]=1)&e[0])}var Ht=!1,Ka=1n<<63n-1n,Xa=-1n<<63n,Wa=1n<<64n,qa=0n;function Ja(e,i){let t=(i&128)>>7,a=(i&124)>>2,r=((i&3)<<8)+e,n;return a==31?n=r==0?1/0:NaN:a==0?n=2**-14*(r/1024):n=2**(a-15)*(1+r/1024),t?-n:n}var Ae=class extends DataView{getFloat16(e,i){let t=[this.getUint8(e),this.getUint8(e+1)];i||t.reverse();let[a,r]=t;return Ja(a,r)}getUint64(e,i){let t=BigInt(this.getUint32(e,i)),a=BigInt(this.getUint32(e+4,i)),r=i?t+(a<<32n):(t<<32n)+a;return Ht&&(r<qa||r>Wa)&&console.warn(r,"exceeds range of 64-bit unsigned int"),Number(r)}getInt64(e,i){var t,a;i?(t=this.getUint32(e,!0),a=this.getInt32(e+4,!0)):(a=this.getInt32(e,!1),t=this.getUint32(e+4,!1));let r=BigInt(t)+(BigInt(a)<<32n);return Ht&&(r<Xa||r>Ka)&&console.warn(r,"exceeds range of 64-bit signed int"),Number(r)}getString(e,i,t){let a=this.buffer.slice(e,e+t);return new TextDecoder().decode(a)}getVLENStruct(e,i,t){let a=this.getUint32(e,i),r=this.getUint64(e+4,i),n=this.getUint32(e+12,i);return[a,r,n]}};function Ui(e){return e.toString(2).length}function Ut(e,i,t=0,a=!0){let r=new Uint8Array(i.slice(t,t+e));return a||r.reverse(),r.reduce((s,_,d)=>s+(_<<d*8),0)}var Ft=class{constructor(e,i){this.buf=e,this.offset=i,this.dtype=this.determine_dtype()}determine_dtype(){let e=D(Fi,this.buf,this.offset);this.offset+=er;let i=e.get("class_and_version")&15;if(i==ir)return this._determine_dtype_fixed_point(e);if(i==ar)return this._determine_dtype_floating_point(e);if(i==rr)throw"Time datatype class not supported.";if(i==nr)return this._determine_dtype_string(e);if(i==_r)throw"Bitfield datatype class not supported.";if(i==lr)throw"Opaque datatype class not supported.";if(i==sr)return this._determine_dtype_compound(e);if(i==or)return["REFERENCE",e.get("size")];if(i==dr)return this.determine_dtype();if(i==fr)throw"Array datatype class not supported.";if(i==hr){let t=this._determine_dtype_vlen(e);return t[0]=="VLEN_SEQUENCE"&&(t=["VLEN_SEQUENCE",this.determine_dtype()]),t}else throw"Invalid datatype class "+i}_determine_dtype_fixed_point(e){let i=e.get("size");if(![1,2,4,8].includes(i))throw"Unsupported datatype size";let t=e.get("class_bit_field_0")&8;var a;t>0?a="i":a="u";let r=e.get("class_bit_field_0")&1;var n;return r==0?n="<":n=">",this.offset+=4,n+a+i.toFixed()}_determine_dtype_floating_point(e){let i=e.get("size");if(![1,2,4,8].includes(i))throw"Unsupported datatype size";let t="f",a=e.get("class_bit_field_0")&1;var r;return a==0?r="<":r=">",this.offset+=12,r+t+i.toFixed()}_determine_dtype_string(e){return"S"+e.get("size").toFixed()}_determine_dtype_vlen(e){if((e.get("class_bit_field_0")&1)!=1)return["VLEN_SEQUENCE",0,0];let t=e.get("class_bit_field_0")>>4,a=e.get("class_bit_field_1")&1;return["VLEN_STRING",t,a]}_determine_dtype_compound(e){throw"Compound type not yet implemented!"}},Fi=new Map([["class_and_version","B"],["class_bit_field_0","B"],["class_bit_field_1","B"],["class_bit_field_2","B"],["size","I"]]),er=B(Fi),tr=new Map([["offset","I"],["dimensionality","B"],["reserved_0","B"],["reserved_1","B"],["reserved_2","B"],["permutation","I"],["reserved_3","I"],["dim_size_1","I"],["dim_size_2","I"],["dim_size_3","I"],["dim_size_4","I"]]),Ol=B(tr),ir=0,ar=1,rr=2,nr=3,_r=4,lr=5,sr=6,or=7,dr=8,hr=9,fr=10,cr=4,Zt=0,Ct=1,ur=2;function pe(e){let i=e.length;for(;--i>=0;)e[i]=0}var gr=0,Zi=1,vr=2,pr=3,br=258,It=29,He=256,Te=He+1+It,ue=30,Tt=19,Ci=2*Te+1,ne=15,it=16,wr=7,Dt=256,ji=16,Pi=17,$i=18,bt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ye=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),mr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Qi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kr=512,K=new Array((Te+2)*2);pe(K);var xe=new Array(ue*2);pe(xe);var De=new Array(kr);pe(De);var Re=new Array(br-pr+1);pe(Re);var Rt=new Array(It);pe(Rt);var Ke=new Array(ue);pe(Ke);function at(e,i,t,a,r){this.static_tree=e,this.extra_bits=i,this.extra_base=t,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}var Gi,Vi,Yi;function rt(e,i){this.dyn_tree=e,this.max_code=0,this.stat_desc=i}var Ki=e=>e<256?De[e]:De[256+(e>>>7)],Be=(e,i)=>{e.pending_buf[e.pending++]=i&255,e.pending_buf[e.pending++]=i>>>8&255},U=(e,i,t)=>{e.bi_valid>it-t?(e.bi_buf|=i<<e.bi_valid&65535,Be(e,e.bi_buf),e.bi_buf=i>>it-e.bi_valid,e.bi_valid+=t-it):(e.bi_buf|=i<<e.bi_valid&65535,e.bi_valid+=t)},Q=(e,i,t)=>{U(e,t[i*2],t[i*2+1])},Xi=(e,i)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--i>0);return t>>>1},Er=e=>{e.bi_valid===16?(Be(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},yr=(e,i)=>{let t=i.dyn_tree,a=i.max_code,r=i.stat_desc.static_tree,n=i.stat_desc.has_stree,s=i.stat_desc.extra_bits,_=i.stat_desc.extra_base,d=i.stat_desc.max_length,l,o,c,f,h,g,y=0;for(f=0;f<=ne;f++)e.bl_count[f]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Ci;l++)o=e.heap[l],f=t[t[o*2+1]*2+1]+1,f>d&&(f=d,y++),t[o*2+1]=f,!(o>a)&&(e.bl_count[f]++,h=0,o>=_&&(h=s[o-_]),g=t[o*2],e.opt_len+=g*(f+h),n&&(e.static_len+=g*(r[o*2+1]+h)));if(y!==0){do{for(f=d-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[d]--,y-=2}while(y>0);for(f=d;f!==0;f--)for(o=e.bl_count[f];o!==0;)c=e.heap[--l],!(c>a)&&(t[c*2+1]!==f&&(e.opt_len+=(f-t[c*2+1])*t[c*2],t[c*2+1]=f),o--)}},Wi=(e,i,t)=>{let a=new Array(ne+1),r=0,n,s;for(n=1;n<=ne;n++)r=r+t[n-1]<<1,a[n]=r;for(s=0;s<=i;s++){let _=e[s*2+1];_!==0&&(e[s*2]=Xi(a[_]++,_))}},zr=()=>{let e,i,t,a,r,n=new Array(ne+1);for(t=0,a=0;a<It-1;a++)for(Rt[a]=t,e=0;e<1<<bt[a];e++)Re[t++]=a;for(Re[t-1]=a,r=0,a=0;a<16;a++)for(Ke[a]=r,e=0;e<1<<Ye[a];e++)De[r++]=a;for(r>>=7;a<ue;a++)for(Ke[a]=r<<7,e=0;e<1<<Ye[a]-7;e++)De[256+r++]=a;for(i=0;i<=ne;i++)n[i]=0;for(e=0;e<=143;)K[e*2+1]=8,e++,n[8]++;for(;e<=255;)K[e*2+1]=9,e++,n[9]++;for(;e<=279;)K[e*2+1]=7,e++,n[7]++;for(;e<=287;)K[e*2+1]=8,e++,n[8]++;for(Wi(K,Te+1,n),e=0;e<ue;e++)xe[e*2+1]=5,xe[e*2]=Xi(e,5);Gi=new at(K,bt,He+1,Te,ne),Vi=new at(xe,Ye,0,ue,ne),Yi=new at(new Array(0),mr,0,Tt,wr)},qi=e=>{let i;for(i=0;i<Te;i++)e.dyn_ltree[i*2]=0;for(i=0;i<ue;i++)e.dyn_dtree[i*2]=0;for(i=0;i<Tt;i++)e.bl_tree[i*2]=0;e.dyn_ltree[Dt*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ji=e=>{e.bi_valid>8?Be(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},jt=(e,i,t,a)=>{let r=i*2,n=t*2;return e[r]<e[n]||e[r]===e[n]&&a[i]<=a[t]},nt=(e,i,t)=>{let a=e.heap[t],r=t<<1;for(;r<=e.heap_len&&(r<e.heap_len&&jt(i,e.heap[r+1],e.heap[r],e.depth)&&r++,!jt(i,a,e.heap[r],e.depth));)e.heap[t]=e.heap[r],t=r,r<<=1;e.heap[t]=a},Pt=(e,i,t)=>{let a,r,n=0,s,_;if(e.sym_next!==0)do a=e.pending_buf[e.sym_buf+n++]&255,a+=(e.pending_buf[e.sym_buf+n++]&255)<<8,r=e.pending_buf[e.sym_buf+n++],a===0?Q(e,r,i):(s=Re[r],Q(e,s+He+1,i),_=bt[s],_!==0&&(r-=Rt[s],U(e,r,_)),a--,s=Ki(a),Q(e,s,t),_=Ye[s],_!==0&&(a-=Ke[s],U(e,a,_)));while(n<e.sym_next);Q(e,Dt,i)},wt=(e,i)=>{let t=i.dyn_tree,a=i.stat_desc.static_tree,r=i.stat_desc.has_stree,n=i.stat_desc.elems,s,_,d=-1,l;for(e.heap_len=0,e.heap_max=Ci,s=0;s<n;s++)t[s*2]!==0?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):t[s*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=a[l*2+1]);for(i.max_code=d,s=e.heap_len>>1;s>=1;s--)nt(e,t,s);l=n;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],nt(e,t,1),_=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=_,t[l*2]=t[s*2]+t[_*2],e.depth[l]=(e.depth[s]>=e.depth[_]?e.depth[s]:e.depth[_])+1,t[s*2+1]=t[_*2+1]=l,e.heap[1]=l++,nt(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],yr(e,i),Wi(t,d,e.bl_count)},$t=(e,i,t)=>{let a,r=-1,n,s=i[0*2+1],_=0,d=7,l=4;for(s===0&&(d=138,l=3),i[(t+1)*2+1]=65535,a=0;a<=t;a++)n=s,s=i[(a+1)*2+1],!(++_<d&&n===s)&&(_<l?e.bl_tree[n*2]+=_:n!==0?(n!==r&&e.bl_tree[n*2]++,e.bl_tree[ji*2]++):_<=10?e.bl_tree[Pi*2]++:e.bl_tree[$i*2]++,_=0,r=n,s===0?(d=138,l=3):n===s?(d=6,l=3):(d=7,l=4))},Qt=(e,i,t)=>{let a,r=-1,n,s=i[0*2+1],_=0,d=7,l=4;for(s===0&&(d=138,l=3),a=0;a<=t;a++)if(n=s,s=i[(a+1)*2+1],!(++_<d&&n===s)){if(_<l)do Q(e,n,e.bl_tree);while(--_!==0);else n!==0?(n!==r&&(Q(e,n,e.bl_tree),_--),Q(e,ji,e.bl_tree),U(e,_-3,2)):_<=10?(Q(e,Pi,e.bl_tree),U(e,_-3,3)):(Q(e,$i,e.bl_tree),U(e,_-11,7));_=0,r=n,s===0?(d=138,l=3):n===s?(d=6,l=3):(d=7,l=4)}},Ar=e=>{let i;for($t(e,e.dyn_ltree,e.l_desc.max_code),$t(e,e.dyn_dtree,e.d_desc.max_code),wt(e,e.bl_desc),i=Tt-1;i>=3&&e.bl_tree[Qi[i]*2+1]===0;i--);return e.opt_len+=3*(i+1)+5+5+4,i},xr=(e,i,t,a)=>{let r;for(U(e,i-257,5),U(e,t-1,5),U(e,a-4,4),r=0;r<a;r++)U(e,e.bl_tree[Qi[r]*2+1],3);Qt(e,e.dyn_ltree,i-1),Qt(e,e.dyn_dtree,t-1)},Sr=e=>{let i=4093624447,t;for(t=0;t<=31;t++,i>>>=1)if(i&1&&e.dyn_ltree[t*2]!==0)return Zt;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ct;for(t=32;t<He;t++)if(e.dyn_ltree[t*2]!==0)return Ct;return Zt},Gt=!1,Ir=e=>{Gt||(zr(),Gt=!0),e.l_desc=new rt(e.dyn_ltree,Gi),e.d_desc=new rt(e.dyn_dtree,Vi),e.bl_desc=new rt(e.bl_tree,Yi),e.bi_buf=0,e.bi_valid=0,qi(e)},ea=(e,i,t,a)=>{U(e,(gr<<1)+(a?1:0),3),Ji(e),Be(e,t),Be(e,~t),t&&e.pending_buf.set(e.window.subarray(i,i+t),e.pending),e.pending+=t},Tr=e=>{U(e,Zi<<1,3),Q(e,Dt,K),Er(e)},Dr=(e,i,t,a)=>{let r,n,s=0;e.level>0?(e.strm.data_type===ur&&(e.strm.data_type=Sr(e)),wt(e,e.l_desc),wt(e,e.d_desc),s=Ar(e),r=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,n<=r&&(r=n)):r=n=t+5,t+4<=r&&i!==-1?ea(e,i,t,a):e.strategy===cr||n===r?(U(e,(Zi<<1)+(a?1:0),3),Pt(e,K,xe)):(U(e,(vr<<1)+(a?1:0),3),xr(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Pt(e,e.dyn_ltree,e.dyn_dtree)),qi(e),a&&Ji(e)},Rr=(e,i,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=i,e.pending_buf[e.sym_buf+e.sym_next++]=i>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,i===0?e.dyn_ltree[t*2]++:(e.matches++,i--,e.dyn_ltree[(Re[t]+He+1)*2]++,e.dyn_dtree[Ki(i)*2]++),e.sym_next===e.sym_end),Br=Ir,Nr=ea,Lr=Dr,Mr=Rr,Or=Tr,Hr={_tr_init:Br,_tr_stored_block:Nr,_tr_flush_block:Lr,_tr_tally:Mr,_tr_align:Or},Ur=(e,i,t,a)=>{let r=e&65535|0,n=e>>>16&65535|0,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do r=r+i[a++]|0,n=n+r|0;while(--s);r%=65521,n%=65521}return r|n<<16|0},Ne=Ur,Fr=()=>{let e,i=[];for(var t=0;t<256;t++){e=t;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;i[t]=e}return i},Zr=new Uint32Array(Fr()),Cr=(e,i,t,a)=>{let r=Zr,n=a+t;e^=-1;for(let s=a;s<n;s++)e=e>>>8^r[(e^i[s])&255];return e^-1},M=Cr,se={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},be={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:jr,_tr_stored_block:mt,_tr_flush_block:Pr,_tr_tally:ee,_tr_align:$r}=Hr,{Z_NO_FLUSH:te,Z_PARTIAL_FLUSH:Qr,Z_FULL_FLUSH:Gr,Z_FINISH:C,Z_BLOCK:Vt,Z_OK:O,Z_STREAM_END:Yt,Z_STREAM_ERROR:G,Z_DATA_ERROR:Vr,Z_BUF_ERROR:_t,Z_DEFAULT_COMPRESSION:Yr,Z_FILTERED:Kr,Z_HUFFMAN_ONLY:Ce,Z_RLE:Xr,Z_FIXED:Wr,Z_DEFAULT_STRATEGY:qr,Z_UNKNOWN:Jr,Z_DEFLATED:qe}=be,en=9,tn=15,an=8,rn=29,nn=256,kt=nn+1+rn,_n=30,ln=19,sn=2*kt+1,on=15,I=3,J=258,V=J+I+1,dn=32,ge=42,Bt=57,Et=69,yt=73,zt=91,At=103,_e=113,ye=666,H=1,we=2,oe=3,me=4,hn=3,le=(e,i)=>(e.msg=se[i],i),Kt=e=>e*2-(e>4?9:0),q=e=>{let i=e.length;for(;--i>=0;)e[i]=0},fn=e=>{let i,t,a,r=e.w_size;i=e.hash_size,a=i;do t=e.head[--a],e.head[a]=t>=r?t-r:0;while(--i);i=r,a=i;do t=e.prev[--a],e.prev[a]=t>=r?t-r:0;while(--i)},cn=(e,i,t)=>(i<<e.hash_shift^t)&e.hash_mask,ie=cn,F=e=>{let i=e.state,t=i.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+t),e.next_out),e.next_out+=t,i.pending_out+=t,e.total_out+=t,e.avail_out-=t,i.pending-=t,i.pending===0&&(i.pending_out=0))},Z=(e,i)=>{Pr(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,i),e.block_start=e.strstart,F(e.strm)},T=(e,i)=>{e.pending_buf[e.pending++]=i},ke=(e,i)=>{e.pending_buf[e.pending++]=i>>>8&255,e.pending_buf[e.pending++]=i&255},xt=(e,i,t,a)=>{let r=e.avail_in;return r>a&&(r=a),r===0?0:(e.avail_in-=r,i.set(e.input.subarray(e.next_in,e.next_in+r),t),e.state.wrap===1?e.adler=Ne(e.adler,i,r,t):e.state.wrap===2&&(e.adler=M(e.adler,i,r,t)),e.next_in+=r,e.total_in+=r,r)},ta=(e,i)=>{let t=e.max_chain_length,a=e.strstart,r,n,s=e.prev_length,_=e.nice_match,d=e.strstart>e.w_size-V?e.strstart-(e.w_size-V):0,l=e.window,o=e.w_mask,c=e.prev,f=e.strstart+J,h=l[a+s-1],g=l[a+s];e.prev_length>=e.good_match&&(t>>=2),_>e.lookahead&&(_=e.lookahead);do if(r=i,!(l[r+s]!==g||l[r+s-1]!==h||l[r]!==l[a]||l[++r]!==l[a+1])){a+=2,r++;do;while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<f);if(n=J-(f-a),a=f-J,n>s){if(e.match_start=i,s=n,n>=_)break;h=l[a+s-1],g=l[a+s]}}while((i=c[i&o])>d&&--t!==0);return s<=e.lookahead?s:e.lookahead},ve=e=>{let i=e.w_size,t,a,r;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=i+(i-V)&&(e.window.set(e.window.subarray(i,i+i-a),0),e.match_start-=i,e.strstart-=i,e.block_start-=i,e.insert>e.strstart&&(e.insert=e.strstart),fn(e),a+=i),e.strm.avail_in===0)break;if(t=xt(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=t,e.lookahead+e.insert>=I)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=ie(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=ie(e,e.ins_h,e.window[r+I-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<I)););}while(e.lookahead<V&&e.strm.avail_in!==0)},ia=(e,i)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a,r,n,s=0,_=e.strm.avail_in;do{if(a=65535,n=e.bi_valid+42>>3,e.strm.avail_out<n||(n=e.strm.avail_out-n,r=e.strstart-e.block_start,a>r+e.strm.avail_in&&(a=r+e.strm.avail_in),a>n&&(a=n),a<t&&(a===0&&i!==C||i===te||a!==r+e.strm.avail_in)))break;s=i===C&&a===r+e.strm.avail_in?1:0,mt(e,0,0,s),e.pending_buf[e.pending-4]=a,e.pending_buf[e.pending-3]=a>>8,e.pending_buf[e.pending-2]=~a,e.pending_buf[e.pending-1]=~a>>8,F(e.strm),r&&(r>a&&(r=a),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,a-=r),a&&(xt(e.strm,e.strm.output,e.strm.next_out,a),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a)}while(s===0);return _-=e.strm.avail_in,_&&(_>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=_&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-_,e.strm.next_in),e.strstart),e.strstart+=_,e.insert+=_>e.w_size-e.insert?e.w_size-e.insert:_),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?me:i!==te&&i!==C&&e.strm.avail_in===0&&e.strstart===e.block_start?we:(n=e.window_size-e.strstart,e.strm.avail_in>n&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,n+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),n>e.strm.avail_in&&(n=e.strm.avail_in),n&&(xt(e.strm,e.window,e.strstart,n),e.strstart+=n,e.insert+=n>e.w_size-e.insert?e.w_size-e.insert:n),e.high_water<e.strstart&&(e.high_water=e.strstart),n=e.bi_valid+42>>3,n=e.pending_buf_size-n>65535?65535:e.pending_buf_size-n,t=n>e.w_size?e.w_size:n,r=e.strstart-e.block_start,(r>=t||(r||i===C)&&i!==te&&e.strm.avail_in===0&&r<=n)&&(a=r>n?n:r,s=i===C&&e.strm.avail_in===0&&a===r?1:0,mt(e,e.block_start,a,s),e.block_start+=a,F(e.strm)),s?oe:H)},lt=(e,i)=>{let t,a;for(;;){if(e.lookahead<V){if(ve(e),e.lookahead<V&&i===te)return H;if(e.lookahead===0)break}if(t=0,e.lookahead>=I&&(e.ins_h=ie(e,e.ins_h,e.window[e.strstart+I-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-V&&(e.match_length=ta(e,t)),e.match_length>=I)if(a=ee(e,e.strstart-e.match_start,e.match_length-I),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=I){e.match_length--;do e.strstart++,e.ins_h=ie(e,e.ins_h,e.window[e.strstart+I-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ie(e,e.ins_h,e.window[e.strstart+1]);else a=ee(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(Z(e,!1),e.strm.avail_out===0))return H}return e.insert=e.strstart<I-1?e.strstart:I-1,i===C?(Z(e,!0),e.strm.avail_out===0?oe:me):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?H:we},fe=(e,i)=>{let t,a,r;for(;;){if(e.lookahead<V){if(ve(e),e.lookahead<V&&i===te)return H;if(e.lookahead===0)break}if(t=0,e.lookahead>=I&&(e.ins_h=ie(e,e.ins_h,e.window[e.strstart+I-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=I-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-V&&(e.match_length=ta(e,t),e.match_length<=5&&(e.strategy===Kr||e.match_length===I&&e.strstart-e.match_start>4096)&&(e.match_length=I-1)),e.prev_length>=I&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-I,a=ee(e,e.strstart-1-e.prev_match,e.prev_length-I),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=ie(e,e.ins_h,e.window[e.strstart+I-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=I-1,e.strstart++,a&&(Z(e,!1),e.strm.avail_out===0))return H}else if(e.match_available){if(a=ee(e,0,e.window[e.strstart-1]),a&&Z(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return H}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=ee(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<I-1?e.strstart:I-1,i===C?(Z(e,!0),e.strm.avail_out===0?oe:me):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?H:we},un=(e,i)=>{let t,a,r,n,s=e.window;for(;;){if(e.lookahead<=J){if(ve(e),e.lookahead<=J&&i===te)return H;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=I&&e.strstart>0&&(r=e.strstart-1,a=s[r],a===s[++r]&&a===s[++r]&&a===s[++r])){n=e.strstart+J;do;while(a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&a===s[++r]&&r<n);e.match_length=J-(n-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=I?(t=ee(e,1,e.match_length-I),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=ee(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Z(e,!1),e.strm.avail_out===0))return H}return e.insert=0,i===C?(Z(e,!0),e.strm.avail_out===0?oe:me):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?H:we},gn=(e,i)=>{let t;for(;;){if(e.lookahead===0&&(ve(e),e.lookahead===0)){if(i===te)return H;break}if(e.match_length=0,t=ee(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Z(e,!1),e.strm.avail_out===0))return H}return e.insert=0,i===C?(Z(e,!0),e.strm.avail_out===0?oe:me):e.sym_next&&(Z(e,!1),e.strm.avail_out===0)?H:we};function $(e,i,t,a,r){this.good_length=e,this.max_lazy=i,this.nice_length=t,this.max_chain=a,this.func=r}var ze=[new $(0,0,0,0,ia),new $(4,4,8,4,lt),new $(4,5,16,8,lt),new $(4,6,32,32,lt),new $(4,4,16,16,fe),new $(8,16,32,32,fe),new $(8,16,128,128,fe),new $(8,32,128,256,fe),new $(32,128,258,1024,fe),new $(32,258,258,4096,fe)],vn=e=>{e.window_size=2*e.w_size,q(e.head),e.max_lazy_match=ze[e.level].max_lazy,e.good_match=ze[e.level].good_length,e.nice_match=ze[e.level].nice_length,e.max_chain_length=ze[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=I-1,e.match_available=0,e.ins_h=0};function pn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(sn*2),this.dyn_dtree=new Uint16Array((2*_n+1)*2),this.bl_tree=new Uint16Array((2*ln+1)*2),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(on+1),this.heap=new Uint16Array(2*kt+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*kt+1),q(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ue=e=>{if(!e)return 1;let i=e.state;return!i||i.strm!==e||i.status!==ge&&i.status!==Bt&&i.status!==Et&&i.status!==yt&&i.status!==zt&&i.status!==At&&i.status!==_e&&i.status!==ye?1:0},aa=e=>{if(Ue(e))return le(e,G);e.total_in=e.total_out=0,e.data_type=Jr;let i=e.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?Bt:i.wrap?ge:_e,e.adler=i.wrap===2?0:1,i.last_flush=-2,jr(i),O},ra=e=>{let i=aa(e);return i===O&&vn(e.state),i},bn=(e,i)=>Ue(e)||e.state.wrap!==2?G:(e.state.gzhead=i,O),na=(e,i,t,a,r,n)=>{if(!e)return G;let s=1;if(i===Yr&&(i=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),r<1||r>en||t!==qe||a<8||a>15||i<0||i>9||n<0||n>Wr||a===8&&s!==1)return le(e,G);a===8&&(a=9);let _=new pn;return e.state=_,_.strm=e,_.status=ge,_.wrap=s,_.gzhead=null,_.w_bits=a,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+I-1)/I),_.window=new Uint8Array(_.w_size*2),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=_.lit_bufsize*4,_.pending_buf=new Uint8Array(_.pending_buf_size),_.sym_buf=_.lit_bufsize,_.sym_end=(_.lit_bufsize-1)*3,_.level=i,_.strategy=n,_.method=t,ra(e)},wn=(e,i)=>na(e,i,qe,tn,an,qr),mn=(e,i)=>{if(Ue(e)||i>Vt||i<0)return e?le(e,G):G;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===ye&&i!==C)return le(e,e.avail_out===0?_t:G);let a=t.last_flush;if(t.last_flush=i,t.pending!==0){if(F(e),e.avail_out===0)return t.last_flush=-1,O}else if(e.avail_in===0&&Kt(i)<=Kt(a)&&i!==C)return le(e,_t);if(t.status===ye&&e.avail_in!==0)return le(e,_t);if(t.status===ge&&t.wrap===0&&(t.status=_e),t.status===ge){let r=qe+(t.w_bits-8<<4)<<8,n=-1;if(t.strategy>=Ce||t.level<2?n=0:t.level<6?n=1:t.level===6?n=2:n=3,r|=n<<6,t.strstart!==0&&(r|=dn),r+=31-r%31,ke(t,r),t.strstart!==0&&(ke(t,e.adler>>>16),ke(t,e.adler&65535)),e.adler=1,t.status=_e,F(e),t.pending!==0)return t.last_flush=-1,O}if(t.status===Bt){if(e.adler=0,T(t,31),T(t,139),T(t,8),t.gzhead)T(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),T(t,t.gzhead.time&255),T(t,t.gzhead.time>>8&255),T(t,t.gzhead.time>>16&255),T(t,t.gzhead.time>>24&255),T(t,t.level===9?2:t.strategy>=Ce||t.level<2?4:0),T(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(T(t,t.gzhead.extra.length&255),T(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=M(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Et;else if(T(t,0),T(t,0),T(t,0),T(t,0),T(t,0),T(t,t.level===9?2:t.strategy>=Ce||t.level<2?4:0),T(t,hn),t.status=_e,F(e),t.pending!==0)return t.last_flush=-1,O}if(t.status===Et){if(t.gzhead.extra){let r=t.pending,n=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+n>t.pending_buf_size;){let _=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+_),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>r&&(e.adler=M(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex+=_,F(e),t.pending!==0)return t.last_flush=-1,O;r=0,n-=_}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+n),t.pending),t.pending+=n,t.gzhead.hcrc&&t.pending>r&&(e.adler=M(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=yt}if(t.status===yt){if(t.gzhead.name){let r=t.pending,n;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(e.adler=M(e.adler,t.pending_buf,t.pending-r,r)),F(e),t.pending!==0)return t.last_flush=-1,O;r=0}t.gzindex<t.gzhead.name.length?n=t.gzhead.name.charCodeAt(t.gzindex++)&255:n=0,T(t,n)}while(n!==0);t.gzhead.hcrc&&t.pending>r&&(e.adler=M(e.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=zt}if(t.status===zt){if(t.gzhead.comment){let r=t.pending,n;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(e.adler=M(e.adler,t.pending_buf,t.pending-r,r)),F(e),t.pending!==0)return t.last_flush=-1,O;r=0}t.gzindex<t.gzhead.comment.length?n=t.gzhead.comment.charCodeAt(t.gzindex++)&255:n=0,T(t,n)}while(n!==0);t.gzhead.hcrc&&t.pending>r&&(e.adler=M(e.adler,t.pending_buf,t.pending-r,r))}t.status=At}if(t.status===At){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(F(e),t.pending!==0))return t.last_flush=-1,O;T(t,e.adler&255),T(t,e.adler>>8&255),e.adler=0}if(t.status=_e,F(e),t.pending!==0)return t.last_flush=-1,O}if(e.avail_in!==0||t.lookahead!==0||i!==te&&t.status!==ye){let r=t.level===0?ia(t,i):t.strategy===Ce?gn(t,i):t.strategy===Xr?un(t,i):ze[t.level].func(t,i);if((r===oe||r===me)&&(t.status=ye),r===H||r===oe)return e.avail_out===0&&(t.last_flush=-1),O;if(r===we&&(i===Qr?$r(t):i!==Vt&&(mt(t,0,0,!1),i===Gr&&(q(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),F(e),e.avail_out===0))return t.last_flush=-1,O}return i!==C?O:t.wrap<=0?Yt:(t.wrap===2?(T(t,e.adler&255),T(t,e.adler>>8&255),T(t,e.adler>>16&255),T(t,e.adler>>24&255),T(t,e.total_in&255),T(t,e.total_in>>8&255),T(t,e.total_in>>16&255),T(t,e.total_in>>24&255)):(ke(t,e.adler>>>16),ke(t,e.adler&65535)),F(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?O:Yt)},kn=e=>{if(Ue(e))return G;let i=e.state.status;return e.state=null,i===_e?le(e,Vr):O},En=(e,i)=>{let t=i.length;if(Ue(e))return G;let a=e.state,r=a.wrap;if(r===2||r===1&&a.status!==ge||a.lookahead)return G;if(r===1&&(e.adler=Ne(e.adler,i,t,0)),a.wrap=0,t>=a.w_size){r===0&&(q(a.head),a.strstart=0,a.block_start=0,a.insert=0);let d=new Uint8Array(a.w_size);d.set(i.subarray(t-a.w_size,t),0),i=d,t=a.w_size}let n=e.avail_in,s=e.next_in,_=e.input;for(e.avail_in=t,e.next_in=0,e.input=i,ve(a);a.lookahead>=I;){let d=a.strstart,l=a.lookahead-(I-1);do a.ins_h=ie(a,a.ins_h,a.window[d+I-1]),a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++;while(--l);a.strstart=d,a.lookahead=I-1,ve(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=I-1,a.match_available=0,e.next_in=s,e.input=_,e.avail_in=n,a.wrap=r,O},yn=wn,zn=na,An=ra,xn=aa,Sn=bn,In=mn,Tn=kn,Dn=En,Rn="pako deflate (from Nodeca project)",Se={deflateInit:yn,deflateInit2:zn,deflateReset:An,deflateResetKeep:xn,deflateSetHeader:Sn,deflate:In,deflateEnd:Tn,deflateSetDictionary:Dn,deflateInfo:Rn},Bn=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),Nn=function(e){let i=Array.prototype.slice.call(arguments,1);for(;i.length;){let t=i.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let a in t)Bn(t,a)&&(e[a]=t[a])}}return e},Ln=e=>{let i=0;for(let a=0,r=e.length;a<r;a++)i+=e[a].length;let t=new Uint8Array(i);for(let a=0,r=0,n=e.length;a<n;a++){let s=e[a];t.set(s,r),r+=s.length}return t},Je={assign:Nn,flattenChunks:Ln},_a=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_a=!1}var Le=new Uint8Array(256);for(let e=0;e<256;e++)Le[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Le[254]=Le[254]=1;var Mn=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let i,t,a,r,n,s=e.length,_=0;for(r=0;r<s;r++)t=e.charCodeAt(r),(t&64512)===55296&&r+1<s&&(a=e.charCodeAt(r+1),(a&64512)===56320&&(t=65536+(t-55296<<10)+(a-56320),r++)),_+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(_),n=0,r=0;n<_;r++)t=e.charCodeAt(r),(t&64512)===55296&&r+1<s&&(a=e.charCodeAt(r+1),(a&64512)===56320&&(t=65536+(t-55296<<10)+(a-56320),r++)),t<128?i[n++]=t:t<2048?(i[n++]=192|t>>>6,i[n++]=128|t&63):t<65536?(i[n++]=224|t>>>12,i[n++]=128|t>>>6&63,i[n++]=128|t&63):(i[n++]=240|t>>>18,i[n++]=128|t>>>12&63,i[n++]=128|t>>>6&63,i[n++]=128|t&63);return i},On=(e,i)=>{if(i<65534&&e.subarray&&_a)return String.fromCharCode.apply(null,e.length===i?e:e.subarray(0,i));let t="";for(let a=0;a<i;a++)t+=String.fromCharCode(e[a]);return t},Hn=(e,i)=>{let t=i||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,i));let a,r,n=new Array(t*2);for(r=0,a=0;a<t;){let s=e[a++];if(s<128){n[r++]=s;continue}let _=Le[s];if(_>4){n[r++]=65533,a+=_-1;continue}for(s&=_===2?31:_===3?15:7;_>1&&a<t;)s=s<<6|e[a++]&63,_--;if(_>1){n[r++]=65533;continue}s<65536?n[r++]=s:(s-=65536,n[r++]=55296|s>>10&1023,n[r++]=56320|s&1023)}return On(n,r)},Un=(e,i)=>{i=i||e.length,i>e.length&&(i=e.length);let t=i-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?i:t+Le[e[t]]>i?t:i},Me={string2buf:Mn,buf2string:Hn,utf8border:Un};function Fn(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var la=Fn,sa=Object.prototype.toString,{Z_NO_FLUSH:Zn,Z_SYNC_FLUSH:Cn,Z_FULL_FLUSH:jn,Z_FINISH:Pn,Z_OK:Xe,Z_STREAM_END:$n,Z_DEFAULT_COMPRESSION:Qn,Z_DEFAULT_STRATEGY:Gn,Z_DEFLATED:Vn}=be;function Fe(e){this.options=Je.assign({level:Qn,method:Vn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Gn},e||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new la,this.strm.avail_out=0;let t=Se.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(t!==Xe)throw new Error(se[t]);if(i.header&&Se.deflateSetHeader(this.strm,i.header),i.dictionary){let a;if(typeof i.dictionary=="string"?a=Me.string2buf(i.dictionary):sa.call(i.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(i.dictionary):a=i.dictionary,t=Se.deflateSetDictionary(this.strm,a),t!==Xe)throw new Error(se[t]);this._dict_set=!0}}Fe.prototype.push=function(e,i){let t=this.strm,a=this.options.chunkSize,r,n;if(this.ended)return!1;for(i===~~i?n=i:n=i===!0?Pn:Zn,typeof e=="string"?t.input=Me.string2buf(e):sa.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),(n===Cn||n===jn)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(r=Se.deflate(t,n),r===$n)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),r=Se.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Xe;if(t.avail_out===0){this.onData(t.output);continue}if(n>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};Fe.prototype.onData=function(e){this.chunks.push(e)};Fe.prototype.onEnd=function(e){e===Xe&&(this.result=Je.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Nt(e,i){let t=new Fe(i);if(t.push(e,!0),t.err)throw t.msg||se[t.err];return t.result}function Yn(e,i){return i=i||{},i.raw=!0,Nt(e,i)}function Kn(e,i){return i=i||{},i.gzip=!0,Nt(e,i)}var Xn=Fe,Wn=Nt,qn=Yn,Jn=Kn,e_=be,t_={Deflate:Xn,deflate:Wn,deflateRaw:qn,gzip:Jn,constants:e_},je=16209,i_=16191,a_=function(i,t){let a,r,n,s,_,d,l,o,c,f,h,g,y,E,m,z,w,u,S,L,p,A,k,b,x=i.state;a=i.next_in,k=i.input,r=a+(i.avail_in-5),n=i.next_out,b=i.output,s=n-(t-i.avail_out),_=n+(i.avail_out-257),d=x.dmax,l=x.wsize,o=x.whave,c=x.wnext,f=x.window,h=x.hold,g=x.bits,y=x.lencode,E=x.distcode,m=(1<<x.lenbits)-1,z=(1<<x.distbits)-1;e:do{g<15&&(h+=k[a++]<<g,g+=8,h+=k[a++]<<g,g+=8),w=y[h&m];t:for(;;){if(u=w>>>24,h>>>=u,g-=u,u=w>>>16&255,u===0)b[n++]=w&65535;else if(u&16){S=w&65535,u&=15,u&&(g<u&&(h+=k[a++]<<g,g+=8),S+=h&(1<<u)-1,h>>>=u,g-=u),g<15&&(h+=k[a++]<<g,g+=8,h+=k[a++]<<g,g+=8),w=E[h&z];i:for(;;){if(u=w>>>24,h>>>=u,g-=u,u=w>>>16&255,u&16){if(L=w&65535,u&=15,g<u&&(h+=k[a++]<<g,g+=8,g<u&&(h+=k[a++]<<g,g+=8)),L+=h&(1<<u)-1,L>d){i.msg="invalid distance too far back",x.mode=je;break e}if(h>>>=u,g-=u,u=n-s,L>u){if(u=L-u,u>o&&x.sane){i.msg="invalid distance too far back",x.mode=je;break e}if(p=0,A=f,c===0){if(p+=l-u,u<S){S-=u;do b[n++]=f[p++];while(--u);p=n-L,A=b}}else if(c<u){if(p+=l+c-u,u-=c,u<S){S-=u;do b[n++]=f[p++];while(--u);if(p=0,c<S){u=c,S-=u;do b[n++]=f[p++];while(--u);p=n-L,A=b}}}else if(p+=c-u,u<S){S-=u;do b[n++]=f[p++];while(--u);p=n-L,A=b}for(;S>2;)b[n++]=A[p++],b[n++]=A[p++],b[n++]=A[p++],S-=3;S&&(b[n++]=A[p++],S>1&&(b[n++]=A[p++]))}else{p=n-L;do b[n++]=b[p++],b[n++]=b[p++],b[n++]=b[p++],S-=3;while(S>2);S&&(b[n++]=b[p++],S>1&&(b[n++]=b[p++]))}}else if((u&64)===0){w=E[(w&65535)+(h&(1<<u)-1)];continue i}else{i.msg="invalid distance code",x.mode=je;break e}break}}else if((u&64)===0){w=y[(w&65535)+(h&(1<<u)-1)];continue t}else if(u&32){x.mode=i_;break e}else{i.msg="invalid literal/length code",x.mode=je;break e}break}}while(a<r&&n<_);S=g>>3,a-=S,g-=S<<3,h&=(1<<g)-1,i.next_in=a,i.next_out=n,i.avail_in=a<r?5+(r-a):5-(a-r),i.avail_out=n<_?257+(_-n):257-(n-_),x.hold=h,x.bits=g},ce=15,Xt=852,Wt=592,qt=0,st=1,Jt=2,r_=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),__=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),l_=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),s_=(e,i,t,a,r,n,s,_)=>{let d=_.bits,l=0,o=0,c=0,f=0,h=0,g=0,y=0,E=0,m=0,z=0,w,u,S,L,p,A=null,k,b=new Uint16Array(ce+1),x=new Uint16Array(ce+1),P=null,ae,re,W;for(l=0;l<=ce;l++)b[l]=0;for(o=0;o<a;o++)b[i[t+o]]++;for(h=d,f=ce;f>=1&&b[f]===0;f--);if(h>f&&(h=f),f===0)return r[n++]=1<<24|64<<16|0,r[n++]=1<<24|64<<16|0,_.bits=1,0;for(c=1;c<f&&b[c]===0;c++);for(h<c&&(h=c),E=1,l=1;l<=ce;l++)if(E<<=1,E-=b[l],E<0)return-1;if(E>0&&(e===qt||f!==1))return-1;for(x[1]=0,l=1;l<ce;l++)x[l+1]=x[l]+b[l];for(o=0;o<a;o++)i[t+o]!==0&&(s[x[i[t+o]]++]=o);if(e===qt?(A=P=s,k=20):e===st?(A=r_,P=n_,k=257):(A=__,P=l_,k=0),z=0,o=0,l=c,p=n,g=h,y=0,S=-1,m=1<<h,L=m-1,e===st&&m>Xt||e===Jt&&m>Wt)return 1;for(;;){ae=l-y,s[o]+1<k?(re=0,W=s[o]):s[o]>=k?(re=P[s[o]-k],W=A[s[o]-k]):(re=96,W=0),w=1<<l-y,u=1<<g,c=u;do u-=w,r[p+(z>>y)+u]=ae<<24|re<<16|W|0;while(u!==0);for(w=1<<l-1;z&w;)w>>=1;if(w!==0?(z&=w-1,z+=w):z=0,o++,--b[l]===0){if(l===f)break;l=i[t+s[o]]}if(l>h&&(z&L)!==S){for(y===0&&(y=h),p+=c,g=l-y,E=1<<g;g+y<f&&(E-=b[g+y],!(E<=0));)g++,E<<=1;if(m+=1<<g,e===st&&m>Xt||e===Jt&&m>Wt)return 1;S=z&L,r[S]=h<<24|g<<16|p-n|0}}return z!==0&&(r[p+z]=l-y<<24|64<<16|0),_.bits=h,0},Ie=s_,o_=0,oa=1,da=2,{Z_FINISH:ei,Z_BLOCK:d_,Z_TREES:Pe,Z_OK:de,Z_STREAM_END:h_,Z_NEED_DICT:f_,Z_STREAM_ERROR:j,Z_DATA_ERROR:ha,Z_MEM_ERROR:fa,Z_BUF_ERROR:c_,Z_DEFLATED:ti}=be,et=16180,ii=16181,ai=16182,ri=16183,ni=16184,_i=16185,li=16186,si=16187,oi=16188,di=16189,We=16190,Y=16191,ot=16192,hi=16193,dt=16194,fi=16195,ci=16196,ui=16197,gi=16198,$e=16199,Qe=16200,vi=16201,pi=16202,bi=16203,wi=16204,mi=16205,ht=16206,ki=16207,Ei=16208,N=16209,ca=16210,ua=16211,u_=852,g_=592,v_=15,p_=v_,yi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function b_(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var he=e=>{if(!e)return 1;let i=e.state;return!i||i.strm!==e||i.mode<et||i.mode>ua?1:0},ga=e=>{if(he(e))return j;let i=e.state;return e.total_in=e.total_out=i.total=0,e.msg="",i.wrap&&(e.adler=i.wrap&1),i.mode=et,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(u_),i.distcode=i.distdyn=new Int32Array(g_),i.sane=1,i.back=-1,de},va=e=>{if(he(e))return j;let i=e.state;return i.wsize=0,i.whave=0,i.wnext=0,ga(e)},pa=(e,i)=>{let t;if(he(e))return j;let a=e.state;return i<0?(t=0,i=-i):(t=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?j:(a.window!==null&&a.wbits!==i&&(a.window=null),a.wrap=t,a.wbits=i,va(e))},ba=(e,i)=>{if(!e)return j;let t=new b_;e.state=t,t.strm=e,t.window=null,t.mode=et;let a=pa(e,i);return a!==de&&(e.state=null),a},w_=e=>ba(e,p_),zi=!0,ft,ct,m_=e=>{if(zi){ft=new Int32Array(512),ct=new Int32Array(32);let i=0;for(;i<144;)e.lens[i++]=8;for(;i<256;)e.lens[i++]=9;for(;i<280;)e.lens[i++]=7;for(;i<288;)e.lens[i++]=8;for(Ie(oa,e.lens,0,288,ft,0,e.work,{bits:9}),i=0;i<32;)e.lens[i++]=5;Ie(da,e.lens,0,32,ct,0,e.work,{bits:5}),zi=!1}e.lencode=ft,e.lenbits=9,e.distcode=ct,e.distbits=5},wa=(e,i,t,a)=>{let r,n=e.state;return n.window===null&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Uint8Array(n.wsize)),a>=n.wsize?(n.window.set(i.subarray(t-n.wsize,t),0),n.wnext=0,n.whave=n.wsize):(r=n.wsize-n.wnext,r>a&&(r=a),n.window.set(i.subarray(t-a,t-a+r),n.wnext),a-=r,a?(n.window.set(i.subarray(t-a,t),0),n.wnext=a,n.whave=n.wsize):(n.wnext+=r,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=r))),0},k_=(e,i)=>{let t,a,r,n,s,_,d,l,o,c,f,h,g,y,E=0,m,z,w,u,S,L,p,A,k=new Uint8Array(4),b,x,P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(he(e)||!e.output||!e.input&&e.avail_in!==0)return j;t=e.state,t.mode===Y&&(t.mode=ot),s=e.next_out,r=e.output,d=e.avail_out,n=e.next_in,a=e.input,_=e.avail_in,l=t.hold,o=t.bits,c=_,f=d,A=de;e:for(;;)switch(t.mode){case et:if(t.wrap===0){t.mode=ot;break}for(;o<16;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=l&255,k[1]=l>>>8&255,t.check=M(t.check,k,2,0),l=0,o=0,t.mode=ii;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=N;break}if((l&15)!==ti){e.msg="unknown compression method",t.mode=N;break}if(l>>>=4,o-=4,p=(l&15)+8,t.wbits===0&&(t.wbits=p),p>15||p>t.wbits){e.msg="invalid window size",t.mode=N;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?di:Y,l=0,o=0;break;case ii:for(;o<16;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(t.flags=l,(t.flags&255)!==ti){e.msg="unknown compression method",t.mode=N;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=N;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,t.check=M(t.check,k,2,0)),l=0,o=0,t.mode=ai;case ai:for(;o<32;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,k[2]=l>>>16&255,k[3]=l>>>24&255,t.check=M(t.check,k,4,0)),l=0,o=0,t.mode=ri;case ri:for(;o<16;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,t.check=M(t.check,k,2,0)),l=0,o=0,t.mode=ni;case ni:if(t.flags&1024){for(;o<16;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(k[0]=l&255,k[1]=l>>>8&255,t.check=M(t.check,k,2,0)),l=0,o=0}else t.head&&(t.head.extra=null);t.mode=_i;case _i:if(t.flags&1024&&(h=t.length,h>_&&(h=_),h&&(t.head&&(p=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(a.subarray(n,n+h),p)),t.flags&512&&t.wrap&4&&(t.check=M(t.check,a,h,n)),_-=h,n+=h,t.length-=h),t.length))break e;t.length=0,t.mode=li;case li:if(t.flags&2048){if(_===0)break e;h=0;do p=a[n+h++],t.head&&p&&t.length<65536&&(t.head.name+=String.fromCharCode(p));while(p&&h<_);if(t.flags&512&&t.wrap&4&&(t.check=M(t.check,a,h,n)),_-=h,n+=h,p)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=si;case si:if(t.flags&4096){if(_===0)break e;h=0;do p=a[n+h++],t.head&&p&&t.length<65536&&(t.head.comment+=String.fromCharCode(p));while(p&&h<_);if(t.flags&512&&t.wrap&4&&(t.check=M(t.check,a,h,n)),_-=h,n+=h,p)break e}else t.head&&(t.head.comment=null);t.mode=oi;case oi:if(t.flags&512){for(;o<16;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=N;break}l=0,o=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Y;break;case di:for(;o<32;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}e.adler=t.check=yi(l),l=0,o=0,t.mode=We;case We:if(t.havedict===0)return e.next_out=s,e.avail_out=d,e.next_in=n,e.avail_in=_,t.hold=l,t.bits=o,f_;e.adler=t.check=1,t.mode=Y;case Y:if(i===d_||i===Pe)break e;case ot:if(t.last){l>>>=o&7,o-=o&7,t.mode=ht;break}for(;o<3;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}switch(t.last=l&1,l>>>=1,o-=1,l&3){case 0:t.mode=hi;break;case 1:if(m_(t),t.mode=$e,i===Pe){l>>>=2,o-=2;break e}break;case 2:t.mode=ci;break;case 3:e.msg="invalid block type",t.mode=N}l>>>=2,o-=2;break;case hi:for(l>>>=o&7,o-=o&7;o<32;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=N;break}if(t.length=l&65535,l=0,o=0,t.mode=dt,i===Pe)break e;case dt:t.mode=fi;case fi:if(h=t.length,h){if(h>_&&(h=_),h>d&&(h=d),h===0)break e;r.set(a.subarray(n,n+h),s),_-=h,n+=h,d-=h,s+=h,t.length-=h;break}t.mode=Y;break;case ci:for(;o<14;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(t.nlen=(l&31)+257,l>>>=5,o-=5,t.ndist=(l&31)+1,l>>>=5,o-=5,t.ncode=(l&15)+4,l>>>=4,o-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=N;break}t.have=0,t.mode=ui;case ui:for(;t.have<t.ncode;){for(;o<3;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}t.lens[P[t.have++]]=l&7,l>>>=3,o-=3}for(;t.have<19;)t.lens[P[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,b={bits:t.lenbits},A=Ie(o_,t.lens,0,19,t.lencode,0,t.work,b),t.lenbits=b.bits,A){e.msg="invalid code lengths set",t.mode=N;break}t.have=0,t.mode=gi;case gi:for(;t.have<t.nlen+t.ndist;){for(;E=t.lencode[l&(1<<t.lenbits)-1],m=E>>>24,z=E>>>16&255,w=E&65535,!(m<=o);){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(w<16)l>>>=m,o-=m,t.lens[t.have++]=w;else{if(w===16){for(x=m+2;o<x;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(l>>>=m,o-=m,t.have===0){e.msg="invalid bit length repeat",t.mode=N;break}p=t.lens[t.have-1],h=3+(l&3),l>>>=2,o-=2}else if(w===17){for(x=m+3;o<x;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}l>>>=m,o-=m,p=0,h=3+(l&7),l>>>=3,o-=3}else{for(x=m+7;o<x;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}l>>>=m,o-=m,p=0,h=11+(l&127),l>>>=7,o-=7}if(t.have+h>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=N;break}for(;h--;)t.lens[t.have++]=p}}if(t.mode===N)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=N;break}if(t.lenbits=9,b={bits:t.lenbits},A=Ie(oa,t.lens,0,t.nlen,t.lencode,0,t.work,b),t.lenbits=b.bits,A){e.msg="invalid literal/lengths set",t.mode=N;break}if(t.distbits=6,t.distcode=t.distdyn,b={bits:t.distbits},A=Ie(da,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,b),t.distbits=b.bits,A){e.msg="invalid distances set",t.mode=N;break}if(t.mode=$e,i===Pe)break e;case $e:t.mode=Qe;case Qe:if(_>=6&&d>=258){e.next_out=s,e.avail_out=d,e.next_in=n,e.avail_in=_,t.hold=l,t.bits=o,a_(e,f),s=e.next_out,r=e.output,d=e.avail_out,n=e.next_in,a=e.input,_=e.avail_in,l=t.hold,o=t.bits,t.mode===Y&&(t.back=-1);break}for(t.back=0;E=t.lencode[l&(1<<t.lenbits)-1],m=E>>>24,z=E>>>16&255,w=E&65535,!(m<=o);){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(z&&(z&240)===0){for(u=m,S=z,L=w;E=t.lencode[L+((l&(1<<u+S)-1)>>u)],m=E>>>24,z=E>>>16&255,w=E&65535,!(u+m<=o);){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}l>>>=u,o-=u,t.back+=u}if(l>>>=m,o-=m,t.back+=m,t.length=w,z===0){t.mode=mi;break}if(z&32){t.back=-1,t.mode=Y;break}if(z&64){e.msg="invalid literal/length code",t.mode=N;break}t.extra=z&15,t.mode=vi;case vi:if(t.extra){for(x=t.extra;o<x;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,o-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=pi;case pi:for(;E=t.distcode[l&(1<<t.distbits)-1],m=E>>>24,z=E>>>16&255,w=E&65535,!(m<=o);){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if((z&240)===0){for(u=m,S=z,L=w;E=t.distcode[L+((l&(1<<u+S)-1)>>u)],m=E>>>24,z=E>>>16&255,w=E&65535,!(u+m<=o);){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}l>>>=u,o-=u,t.back+=u}if(l>>>=m,o-=m,t.back+=m,z&64){e.msg="invalid distance code",t.mode=N;break}t.offset=w,t.extra=z&15,t.mode=bi;case bi:if(t.extra){for(x=t.extra;o<x;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,o-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=N;break}t.mode=wi;case wi:if(d===0)break e;if(h=f-d,t.offset>h){if(h=t.offset-h,h>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=N;break}h>t.wnext?(h-=t.wnext,g=t.wsize-h):g=t.wnext-h,h>t.length&&(h=t.length),y=t.window}else y=r,g=s-t.offset,h=t.length;h>d&&(h=d),d-=h,t.length-=h;do r[s++]=y[g++];while(--h);t.length===0&&(t.mode=Qe);break;case mi:if(d===0)break e;r[s++]=t.length,d--,t.mode=Qe;break;case ht:if(t.wrap){for(;o<32;){if(_===0)break e;_--,l|=a[n++]<<o,o+=8}if(f-=d,e.total_out+=f,t.total+=f,t.wrap&4&&f&&(e.adler=t.check=t.flags?M(t.check,r,f,s-f):Ne(t.check,r,f,s-f)),f=d,t.wrap&4&&(t.flags?l:yi(l))!==t.check){e.msg="incorrect data check",t.mode=N;break}l=0,o=0}t.mode=ki;case ki:if(t.wrap&&t.flags){for(;o<32;){if(_===0)break e;_--,l+=a[n++]<<o,o+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=N;break}l=0,o=0}t.mode=Ei;case Ei:A=h_;break e;case N:A=ha;break e;case ca:return fa;case ua:default:return j}return e.next_out=s,e.avail_out=d,e.next_in=n,e.avail_in=_,t.hold=l,t.bits=o,(t.wsize||f!==e.avail_out&&t.mode<N&&(t.mode<ht||i!==ei))&&wa(e,e.output,e.next_out,f-e.avail_out),c-=e.avail_in,f-=e.avail_out,e.total_in+=c,e.total_out+=f,t.total+=f,t.wrap&4&&f&&(e.adler=t.check=t.flags?M(t.check,r,f,e.next_out-f):Ne(t.check,r,f,e.next_out-f)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Y?128:0)+(t.mode===$e||t.mode===dt?256:0),(c===0&&f===0||i===ei)&&A===de&&(A=c_),A},E_=e=>{if(he(e))return j;let i=e.state;return i.window&&(i.window=null),e.state=null,de},y_=(e,i)=>{if(he(e))return j;let t=e.state;return(t.wrap&2)===0?j:(t.head=i,i.done=!1,de)},z_=(e,i)=>{let t=i.length,a,r,n;return he(e)||(a=e.state,a.wrap!==0&&a.mode!==We)?j:a.mode===We&&(r=1,r=Ne(r,i,t,0),r!==a.check)?ha:(n=wa(e,i,t,t),n?(a.mode=ca,fa):(a.havedict=1,de))},A_=va,x_=pa,S_=ga,I_=w_,T_=ba,D_=k_,R_=E_,B_=y_,N_=z_,L_="pako inflate (from Nodeca project)",X={inflateReset:A_,inflateReset2:x_,inflateResetKeep:S_,inflateInit:I_,inflateInit2:T_,inflate:D_,inflateEnd:R_,inflateGetHeader:B_,inflateSetDictionary:N_,inflateInfo:L_};function M_(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var O_=M_,ma=Object.prototype.toString,{Z_NO_FLUSH:H_,Z_FINISH:U_,Z_OK:Oe,Z_STREAM_END:ut,Z_NEED_DICT:gt,Z_STREAM_ERROR:F_,Z_DATA_ERROR:Ai,Z_MEM_ERROR:Z_}=be;function Ze(e){this.options=Je.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(e&&e.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15)===0&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new la,this.strm.avail_out=0;let t=X.inflateInit2(this.strm,i.windowBits);if(t!==Oe)throw new Error(se[t]);if(this.header=new O_,X.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Me.string2buf(i.dictionary):ma.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(t=X.inflateSetDictionary(this.strm,i.dictionary),t!==Oe)))throw new Error(se[t])}Ze.prototype.push=function(e,i){let t=this.strm,a=this.options.chunkSize,r=this.options.dictionary,n,s,_;if(this.ended)return!1;for(i===~~i?s=i:s=i===!0?U_:H_,ma.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),n=X.inflate(t,s),n===gt&&r&&(n=X.inflateSetDictionary(t,r),n===Oe?n=X.inflate(t,s):n===Ai&&(n=gt));t.avail_in>0&&n===ut&&t.state.wrap>0&&e[t.next_in]!==0;)X.inflateReset(t),n=X.inflate(t,s);switch(n){case F_:case Ai:case gt:case Z_:return this.onEnd(n),this.ended=!0,!1}if(_=t.avail_out,t.next_out&&(t.avail_out===0||n===ut))if(this.options.to==="string"){let d=Me.utf8border(t.output,t.next_out),l=t.next_out-d,o=Me.buf2string(t.output,d);t.next_out=l,t.avail_out=a-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(o)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(n===Oe&&_===0)){if(n===ut)return n=X.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Ze.prototype.onData=function(e){this.chunks.push(e)};Ze.prototype.onEnd=function(e){e===Oe&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Je.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Lt(e,i){let t=new Ze(i);if(t.push(e),t.err)throw t.msg||se[t.err];return t.result}function C_(e,i){return i=i||{},i.raw=!0,Lt(e,i)}var j_=Ze,P_=Lt,$_=C_,Q_=Lt,G_=be,V_={Inflate:j_,inflate:P_,inflateRaw:$_,ungzip:Q_,constants:G_},{Deflate:Hl,deflate:Ul,deflateRaw:Fl,gzip:Zl}=t_,{Inflate:Cl,inflate:Y_,inflateRaw:jl,ungzip:Pl}=V_,K_=Y_,X_=function(e,i){let t=new Uint8Array(e);return K_(t).buffer},W_=function(e,i){let t=e.byteLength,a=new Uint8Array(t),r=Math.floor(t/i),n=new DataView(e);for(var s=0;s<i;s++)for(var _=0;_<r;_++)a[s+_*i]=n.getUint8(s*r+_);return a.buffer},q_=function(e,i){return J_(e),e.slice(0,-4)};function J_(e){for(var i=e.byteLength%2!=0,t=e.byteLength-4,a=new DataView(e),r=0,n=0,s=0;s<t-1;s+=2){let l=a.getUint16(s,!0);r=(r+l)%65535,n=(n+r)%65535}if(i){let l=a.getUint8(t-1);r=(r+l)%65535,n=(n+r)%65535}var[_,d]=v.unpack_from(">HH",e,t);if(_=_%65535,d=d%65535,r!=_||n!=d)throw'ValueError("fletcher32 checksum invalid")';return!0}var el=1,tl=2,il=3,xi=new Map([[el,X_],[tl,W_],[il,q_]]),ka=class{constructor(e,i){this.fh=e,this.offset=i,this.depth=null}init(){this.all_nodes=new Map,this._read_root_node(),this._read_children()}_read_children(){let e=this.depth;for(;e>0;){for(var i of this.all_nodes.get(e))for(var t of i.get("addresses"))this._add_node(this._read_node(t,e-1));e--}}_read_root_node(){let e=this._read_node(this.offset,null);this._add_node(e),this.depth=e.get("node_level")}_add_node(e){let i=e.get("node_level");this.all_nodes.has(i)?this.all_nodes.get(i).push(e):this.all_nodes.set(i,[e])}_read_node(e,i){return node=this._read_node_header(e,i),node.set("keys",[]),node.set("addresses",[]),node}_read_node_header(e){throw"NotImplementedError: must define _read_node_header in implementation class"}},Ea=class extends ka{B_LINK_NODE=new Map([["signature","4s"],["node_type","B"],["node_level","B"],["entries_used","H"],["left_sibling","Q"],["right_sibling","Q"]]);_read_node_header(e,i){let t=D(this.B_LINK_NODE,this.fh,e);if(i!=null&&t.get("node_level")!=i)throw"node level does not match";return t}},al=class extends Ea{NODE_TYPE=0;constructor(e,i){super(e,i),this.init()}_read_node(e,i){let t=this._read_node_header(e,i);e+=B(this.B_LINK_NODE);let a=[],r=[],n=t.get("entries_used");for(var s=0;s<n;s++){let _=v.unpack_from("<Q",this.fh,e)[0];e+=8;let d=v.unpack_from("<Q",this.fh,e)[0];e+=8,a.push(_),r.push(d)}return a.push(v.unpack_from("<Q",this.fh,e)[0]),t.set("keys",a),t.set("addresses",r),t}symbol_table_addresses(){var e=[],i=this.all_nodes.get(0);for(var t of i)e=e.concat(t.get("addresses"));return e}},rl=class extends Ea{NODE_TYPE=1;constructor(e,i,t){super(e,i),this.dims=t,this.init()}_read_node(e,i){let t=this._read_node_header(e,i);e+=B(this.B_LINK_NODE);var a=[],r=[];let n=t.get("entries_used");for(var s=0;s<n;s++){let[_,d]=v.unpack_from("<II",this.fh,e);e+=8;let l="<"+this.dims.toFixed()+"Q",o=v.calcsize(l),c=v.unpack_from(l,this.fh,e);e+=o;let f=v.unpack_from("<Q",this.fh,e)[0];e+=8,a.push(new Map([["chunk_size",_],["filter_mask",d],["chunk_offset",c]])),r.push(f)}return t.set("keys",a),t.set("addresses",r),t}construct_data_from_chunks(e,i,t,a){var r,n,s,_;if(t instanceof Array){r=t;let k=t[0];if(k=="REFERENCE"){if(t[1]!=8)throw"NotImplementedError('Unsupported Reference type')";var t="<u8";n="getUint64",s=!1,_=8}else if(k=="VLEN_STRING"||k=="VLEN_SEQUENCE")n="getVLENStruct",s=!1,_=16;else throw"NotImplementedError('datatype not implemented')"}else r=null,[n,s,_]=Ve(t);var d=i.reduce(function(k,b){return k*b},1),l=e.reduce(function(k,b){return k*b},1);let o=i.length;var f=1,c=e.slice().map(function(k){let b=f;return f*=k,b}),f=1,h=i.slice().reverse().map(function(k){let b=f;return f*=k,b}).reverse(),g=new Array(d);let y=l*_;for(var E of this.all_nodes.get(0)){let k=E.get("keys"),b=E.get("addresses"),x=k.length;for(var m=0;m<x;m++){let P=k[m],ae=b[m];var z;if(a==null)z=this.fh.slice(ae,ae+y);else{z=this.fh.slice(ae,ae+P.get("chunk_size"));let re=P.get("filter_mask");z=this._filter_chunk(z,re,a,_)}for(var w=P.get("chunk_offset").slice(),u=w.slice(),S=u.map(function(){return 0}),L=new Ae(z),p=0;p<l;p++){for(var A=o-1;A>=0&&S[A]>=e[A];A--)S[A]=0,u[A]=w[A],A>0&&(S[A-1]+=1,u[A-1]+=1);if(u.slice(0,-1).every(function(W,tt){return W<i[tt]})){let W=p*_,tt=L[n](W,!s,_),ja=u.slice(0,-1).reduce(function(Pa,$a,Qa){return $a*h[Qa]+Pa},0);g[ja]=tt}S[o-1]+=1,u[o-1]+=1}}}return g}_filter_chunk(e,i,t,a){let r=t.length,n=e.slice();for(var s=r-1;s>=0;s--){if(i&1<<s)continue;let _=t[s],d=_.get("filter_id"),l=_.get("client_data");if(xi.has(d))n=xi.get(d)(n,a,l);else throw'NotImplementedError("Filter with id:'+d.toFixed()+' not supported")'}return n}},ya=class extends ka{B_TREE_HEADER=new Map([["signature","4s"],["version","B"],["node_type","B"],["node_size","I"],["record_size","H"],["depth","H"],["split_percent","B"],["merge_percent","B"],["root_address","Q"],["root_nrecords","H"],["total_nrecords","Q"]]);B_LINK_NODE=new Map([["signature","4s"],["version","B"],["node_type","B"]]);constructor(e,i){super(e,i),this.init()}_read_root_node(){let e=this._read_tree_header(this.offset);this.address_formats=this._calculate_address_formats(e),this.header=e,this.depth=e.get("depth");let i=[e.get("root_address"),e.get("root_nrecords"),e.get("total_nrecords")],t=this._read_node(i,this.depth);this._add_node(t)}_read_tree_header(e){return D(this.B_TREE_HEADER,this.fh,this.offset)}_calculate_address_formats(e){let i=e.get("node_size"),t=e.get("record_size"),a=0,r=0,n=new Map,s=e.get("depth");for(var _=0;_<=s;_++){let d="",l="",o="",c,f,h;if(_==0?(c=0,f=0,h=0):_==1?(c=8,d="<Q",f=this._required_bytes(a),l=this._int_format(f),h=0):(c=8,d="<Q",f=this._required_bytes(a),l=this._int_format(f),h=this._required_bytes(r),o=this._int_format(h)),n.set(_,[c,f,h,d,l,o]),_<s){let g=c+f+h;a=this._nrecords_max(i,t,g),r>0?r*=a:r=a}}return n}_nrecords_max(e,i,t){return Math.floor((e-10-t)/(i+t))}_required_bytes(e){return Math.ceil(Ui(e)/8)}_int_format(e){return["<B","<H","<I","<Q"][e-1]}_read_node(e,i){let[t,a,r]=e,n=this._read_node_header(t,i);t+=B(this.B_LINK_NODE);let s=this.header.get("record_size"),_=[];for(let o=0;o<a;o++){let c=this._parse_record(this.fh,t,s);t+=s,_.push(c)}let d=[],l=this.address_formats.get(i);if(i!=0){let[o,c,f,h,g,y]=l;for(let E=0;E<=a;E++){let m=v.unpack_from(h,this.fh,t)[0];t+=o;let z=v.unpack_from(g,this.fh,t)[0];t+=c;let w=z;f>0&&(w=v.unpack_from(y,this.fh,t)[0],t+=f),d.push([m,z,w])}}return n.set("keys",_),n.set("addresses",d),n}_read_node_header(e,i){let t=D(this.B_LINK_NODE,this.fh,e);return i>0,t.set("node_level",i),t}*iter_records(){for(let e of this.all_nodes.values())for(let i of e)for(let t of i.get("keys"))yield t}_parse_record(e){throw"NotImplementedError"}},nl=class extends ya{NODE_TYPE=5;_parse_record(e,i,t){let a=v.unpack_from("<I",e,i)[0];return i+=4,new Map([["namehash",a],["heapid",e.slice(i,i+7)]])}},_l=class extends ya{NODE_TYPE=6;_parse_record(e,i,t){let a=v.unpack_from("<Q",e,i)[0];return i+=8,new Map([["creationorder",a],["heapid",e.slice(i,i+7)]])}},ll=class{constructor(e,i){let t=v.unpack_from("<B",e,i+8)[0];var a;if(t==0)a=D(Aa,e,i),this._end_of_sblock=i+hl;else if(t==2||t==3)a=D(xa,e,i),this._end_of_sblock=i+fl;else throw"unsupported superblock version: "+t.toFixed();if(a.get("format_signature")!=dl)throw"Incorrect file signature: "+a.get("format_signature");if(a.get("offset_size")!=8||a.get("length_size")!=8)throw"File uses non-64-bit addressing";this.version=a.get("superblock_version"),this._contents=a,this._root_symbol_table=null,this._fh=e}get offset_to_dataobjects(){if(this.version==0){var e=new za(this._fh,this._end_of_sblock,!0);return this._root_symbol_table=e,e.group_offset}else{if(this.version==2||this.version==3)return this._contents.get("root_group_address");throw"Not implemented version = "+this.version.toFixed()}}},sl=class{constructor(e,i){let t=D(gl,e,i);R(t.get("signature")=="HEAP"),R(t.get("version")==0);let a=t.get("address_of_data_segment"),r=e.slice(a,a+t.get("data_segment_size"));t.set("heap_data",r),this._contents=t,this.data=r}get_object_name(e){let t=new Uint8Array(this.data).indexOf(0,e)-e;return v.unpack_from("<"+t.toFixed()+"s",this.data,e)[0]}},za=class{constructor(e,i,t=!1){var a;if(t)a=new Map([["symbols",1]]);else{if(a=D(Ia,e,i),a.get("signature")!="SNOD")throw"incorrect node type";i+=ul}for(var r=[],n=a.get("symbols"),s=0;s<n;s++)r.push(D(Sa,e,i)),i+=cl;t&&(this.group_offset=r[0].get("object_header_address")),this.entries=r,this._contents=a}assign_name(e){this.entries.forEach(function(i){let t=i.get("link_name_offset"),a=e.get_object_name(t);i.set("link_name",a)})}get_links(e){var i={};return this.entries.forEach(function(t){let a=t.get("cache_type"),r=t.get("link_name");if(a==0||a==1)i[r]=t.get("object_header_address");else if(a==2){let s=t.get("scratch"),_=new ArrayBuffer(4),d=new Uint8Array(_);for(var n=0;n<4;n++)d[n]=s.charCodeAt(n);let l=v.unpack_from("<I",_,0)[0];i[r]=e.get_object_name(l)}}),i}},Si=class{constructor(e,i){let t=D(Ta,e,i);i+=Ii;let a=t.get("collection_size")-Ii,r=e.slice(i,i+a);this.heap_data=r,this._header=t,this._objects=null}get objects(){if(this._objects==null){this._objects=new Map;for(var e=0;e<=this.heap_data.byteLength-Ti;){let i=D(Da,this.heap_data,e);if(i.get("object_index")==0)break;e+=Ti;let t=this.heap_data.slice(e,e+i.get("object_size"));this._objects.set(i.get("object_index"),t),e+=Ee(i.get("object_size"))}}return this._objects}},ol=class{constructor(e,i){this.fh=e;let t=D(Di,e,i);if(i+=B(Di),R(t.get("signature")=="FRHP"),R(t.get("version")==0),t.get("filter_info_size")>0)throw"Filter info size not supported on FractalHeap";if(t.get("btree_address_huge_objects")==Ge)t.set("btree_address_huge_objects",null);else throw"Huge objects not implemented in FractalHeap";t.get("root_block_address")==Ge&&t.set("root_block_address",null);let a=t.get("log2_maximum_heap_size"),r=this._min_size_nbits(a),n=new Map([["signature","4s"],["version","B"],["heap_header_adddress","Q"],["block_offset",`${r}B`]]);this.indirect_block_header=new Map(n),this.indirect_block_header_size=B(n),(t.get("flags")&2)==2&&n.set("checksum","I"),this.direct_block_header=n,this.direct_block_header_size=B(n);let s=t.get("maximum_direct_block_size");this._managed_object_offset_size=this._min_size_nbits(a);let _=Math.min(s,t.get("max_managed_object_size"));this._managed_object_length_size=this._min_size_integer(_);let d=t.get("starting_block_size"),l=t.get("table_width");if(!(d>0))throw"Starting block size == 0 not implemented";let o=Number(Math.floor(Math.log2(s)));R(1n<<BigInt(o)==s);let c=Number(Math.floor(Math.log2(d)));R(1n<<BigInt(c)==d),this._max_direct_nrows=o-c+2;let f=Math.floor(Math.log2(l));R(1<<f==l),this._indirect_nrows_sub=f+c-1,this.header=t,this.nobjects=t.get("managed_object_count")+t.get("huge_object_count")+t.get("tiny_object_count");let h=[],g=t.get("root_block_address"),y=0;if(g!=null&&(y=t.get("indirect_current_rows_count")),y>0)for(let w of this._iter_indirect_block(e,g,y))h.push(w);else{let w=this._read_direct_block(e,g,d);h.push(w)}let E=h.reduce((w,u)=>w+u.byteLength,0),m=new Uint8Array(E),z=0;h.forEach(w=>{m.set(new Uint8Array(w),z),z+=w.byteLength}),this.managed=m.buffer}_read_direct_block(e,i,t){let a=e.slice(i,i+t),r=D(this.direct_block_header,a);return R(r.get("signature")=="FHDB"),a}get_data(e){let i=v.unpack_from("<B",e,0)[0],t=i&15,a=i>>4&3,r=i>>6,n=1;if(a==0){R(r==0);let s=this._managed_object_offset_size,_=Ut(s,e,n);n+=s,s=this._managed_object_length_size;let d=Ut(s,e,n);return this.managed.slice(_,_+d)}else throw a==1?"tiny objectID not supported in FractalHeap":a==2?"huge objectID not supported in FractalHeap":"unknown objectID type in FractalHeap"}_min_size_integer(e){return this._min_size_nbits(Ui(e))}_min_size_nbits(e){return Math.ceil(e/8)}*_iter_indirect_block(e,i,t){let a=D(this.indirect_block_header,e,i);i+=this.indirect_block_header_size,R(a.get("signature")=="FHIB");let n=a.get("block_offset").reduce((o,c,f)=>o+(c<<f*8),0);a.set("block_offset",n);let[s,_]=this._indirect_info(t),d=[];for(let o=0;o<s;o++){let c=v.unpack_from("<Q",e,i)[0];if(i+=8,c==Ge)break;let f=this._calc_block_size(o);d.push([c,f])}let l=[];for(let o=s;o<s+_;o++){let c=v.unpack_from("<Q",e,i)[0];if(i+=8,c==Ge)break;let f=this._calc_block_size(o),h=this._iblock_nrows_from_block_size(f);l.push([c,h])}for(let[o,c]of d)yield this._read_direct_block(e,o,c);for(let[o,c]of l)for(let f of this._iter_indirect_block(e,o,c))yield f}_calc_block_size(e){let i=Math.floor(e/this.header.get("table_width"));return 2**Math.max(i-1,0)*this.header.get("starting_block_size")}_iblock_nrows_from_block_size(e){let i=Math.floor(Math.log2(e));return R(2**i==e),i-this._indirect_nrows_sub}_indirect_info(e){let i=this.header.get("table_width"),t=e*i,a=this._max_direct_nrows*i,r,n;return e<=a?(r=t,n=0):(r=a,n=t-a),[r,n]}_int_format(e){return["B","H","I","Q"][e-1]}},dl=v.unpack_from("8s",new Uint8Array([137,72,68,70,13,10,26,10]).buffer)[0],Ge=v.unpack_from("<Q",new Uint8Array([255,255,255,255,255,255,255,255]).buffer)[0],Aa=new Map([["format_signature","8s"],["superblock_version","B"],["free_storage_version","B"],["root_group_version","B"],["reserved_0","B"],["shared_header_version","B"],["offset_size","B"],["length_size","B"],["reserved_1","B"],["group_leaf_node_k","H"],["group_internal_node_k","H"],["file_consistency_flags","L"],["base_address_lower","Q"],["free_space_address","Q"],["end_of_file_address","Q"],["driver_information_address","Q"]]),hl=B(Aa),xa=new Map([["format_signature","8s"],["superblock_version","B"],["offset_size","B"],["length_size","B"],["file_consistency_flags","B"],["base_address","Q"],["superblock_extension_address","Q"],["end_of_file_address","Q"],["root_group_address","Q"],["superblock_checksum","I"]]),fl=B(xa),Sa=new Map([["link_name_offset","Q"],["object_header_address","Q"],["cache_type","I"],["reserved","I"],["scratch","16s"]]),cl=B(Sa),Ia=new Map([["signature","4s"],["version","B"],["reserved_0","B"],["symbols","H"]]),ul=B(Ia),gl=new Map([["signature","4s"],["version","B"],["reserved","3s"],["data_segment_size","Q"],["offset_to_free_list","Q"],["address_of_data_segment","Q"]]),Ta=new Map([["signature","4s"],["version","B"],["reserved","3s"],["collection_size","Q"]]),Ii=B(Ta),Da=new Map([["object_index","H"],["reference_count","H"],["reserved","I"],["object_size","Q"]]),Ti=B(Da),Di=new Map([["signature","4s"],["version","B"],["object_index_size","H"],["filter_info_size","H"],["flags","B"],["max_managed_object_size","I"],["next_huge_object_index","Q"],["btree_address_huge_objects","Q"],["managed_freespace_size","Q"],["freespace_manager_address","Q"],["managed_space_size","Q"],["managed_alloc_size","Q"],["next_directblock_iterator_address","Q"],["managed_object_count","Q"],["huge_objects_total_size","Q"],["huge_object_count","Q"],["tiny_objects_total_size","Q"],["tiny_object_count","Q"],["table_width","H"],["starting_block_size","Q"],["maximum_direct_block_size","Q"],["log2_maximum_heap_size","H"],["indirect_starting_rows_count","H"],["root_block_address","Q"],["indirect_current_rows_count","H"]]),Ra=class{constructor(e,i){let t=v.unpack_from("<B",e,i)[0];if(t==1)var[a,r,n]=this._parse_v1_objects(e,i);else if(t==79)var[a,r,n]=this._parse_v2_objects(e,i);else throw"InvalidHDF5File('unknown Data Object Header')";this.fh=e,this.msgs=a,this.msg_data=r,this.offset=i,this._global_heaps={},this._header=n,this._filter_pipeline=null,this._chunk_params_set=!1,this._chunks=null,this._chunk_dims=null,this._chunk_address=null}get dtype(){let i=this.find_msg_type(xl)[0].get("offset_to_message");return new Ft(this.fh,i).dtype}get chunks(){return this._get_chunk_params(),this._chunks}get shape(){let i=this.find_msg_type(Li)[0].get("offset_to_message");return vl(this.fh,i)}get filter_pipeline(){if(this._filter_pipeline!=null)return this._filter_pipeline;let e=this.find_msg_type(Tl);if(!e.length)return this._filter_pipeline=null,this._filter_pipeline;var i=e[0].get("offset_to_message");let[t,a]=v.unpack_from("<BB",this.fh,i);i+=v.calcsize("<BB");var r=[];if(t==1){let[s,_]=v.unpack_from("<HI",this.fh,i);i+=v.calcsize("<HI");for(var n=0;n<a;n++){let d=D(Ca,this.fh,i);i+=zl;let l=Ee(d.get("name_length"),8),o="<"+l.toFixed()+"s",c=v.unpack_from(o,this.fh,i)[0];d.set("filter_name",c),i+=l,o="<"+d.get("client_data_values").toFixed()+"I";let f=v.unpack_from(o,this.fh,i);d.set("client_data",f),i+=4*d.get("client_data_values"),d.get("client_data_values")%2&&(i+=4),r.push(d)}}else if(t==2)for(let s=0;s<a;s++){let _=new Map,d=this.fh,l=v.unpack_from("<H",d,i)[0];i+=2,_.set("filter_id",l);let o=0;l>255&&(o=v.unpack_from("<H",d,i)[0],i+=2);let c=v.unpack_from("<H",d,i)[0];i+=2;let f=(c&1)>0;_.set("optional",f);let h=v.unpack_from("<H",d,i)[0];i+=2;let g;o>0&&(g=v.unpack_from(`${o}s`,d,i)[0],i+=o),_.set("name",g);let y=v.unpack_from(`<${h}i`,d,i);i+=4*h,_.set("client_data",y),_.set("client_data_values",h),r.push(_)}else throw`version ${t} is not supported`;return this._filter_pipeline=r,this._filter_pipeline}find_msg_type(e){return this.msgs.filter(function(i){return i.get("type")==e})}get_attributes(){let e={},i=this.find_msg_type(Dl);for(let t of i){let a=t.get("offset_to_message"),[r,n]=this.unpack_attribute(a);e[r]=n}return e}get fillvalue(){var i=this.find_msg_type(Sl)[0].get("offset_to_message"),t;let a=v.unpack_from("<B",this.fh,i)[0];var r,n,s;if(a==1||a==2)r=D(Fa,this.fh,i),i+=El,t=r.get("fillvalue_defined");else if(a==3)r=D(Za,this.fh,i),i+=yl,t=r.get("flags")&32;else throw'InvalidHDF5File("Unknown fillvalue msg version: "'+String(a);if(t?(n=v.unpack_from("<I",this.fh,i)[0],i+=4):n=0,n){let[_,d,l]=Ve(this.dtype);s=new Ae(this.fh)[_](i,!d,l)}else s=0;return s}unpack_attribute(e){let i=v.unpack_from("<B",this.fh,e)[0];var t,a;if(i==1)t=D(Na,this.fh,e),R(t.get("version")==1),e+=pl,a=8;else if(i==3)t=D(La,this.fh,e),R(t.get("version")==3),e+=bl,a=1;else throw"unsupported attribute message version: "+i;let r=t.get("name_size"),n=v.unpack_from("<"+r.toFixed()+"s",this.fh,e)[0];n=n.replace(/\x00$/,""),e+=Ee(r,a);var s;try{s=new Ft(this.fh,e).dtype}catch{return console.warn("Attribute "+n+" type not implemented, set to null."),[n,null]}e+=Ee(t.get("datatype_size"),a);let _=this.determine_data_shape(this.fh,e),d=_.reduce(function(o,c){return o*c},1);e+=Ee(t.get("dataspace_size"),a);var l=this._attr_value(s,this.fh,d,e);return _.length==0&&(l=l[0]),[n,l]}determine_data_shape(e,i){let t=v.unpack_from("<B",e,i)[0];var a;if(t==1)a=D(Mt,e,i),R(a.get("version")==1),i+=Ma;else if(t==2)a=D(Ot,e,i),R(a.get("version")==2),i+=Oa;else throw"unknown dataspace message version";let r=a.get("dimensionality");return v.unpack_from("<"+r.toFixed()+"Q",e,i)}_attr_value(e,i,t,a){var r=new Array(t);if(e instanceof Array){let l=e[0];for(var n=0;n<t;n++)if(l=="VLEN_STRING"){let o=e[2];var[s,_]=this._vlen_size_and_data(i,a);let c=o==0?"ascii":"utf-8",f=new TextDecoder(c);r[n]=f.decode(_),a+=16}else if(l=="REFERENCE"){var d=v.unpack_from("<Q",i,a);r[n]=d,a+=8}else if(l=="VLEN_SEQUENCE"){let o=e[1];var[s,_]=this._vlen_size_and_data(i,a);r[n]=this._attr_value(o,_,s,0),a+=16}else throw"NotImplementedError"}else{let[l,o,c]=Ve(e),f=new Ae(i,0);for(var n=0;n<t;n++)r[n]=f[l](a,!o,c),a+=c}return r}_vlen_size_and_data(e,i){let t=v.unpack_from("<I",e,i)[0],a=D(Ba,e,i+4),r=a.get("collection_address");R(a.get("collection_address")<Number.MAX_SAFE_INTEGER);var n;r in this._global_heaps||(n=new Si(this.fh,r),this._global_heaps[r]=n),n=this._global_heaps[r];let s=n.objects.get(a.get("object_index"));return[t,s]}_parse_v1_objects(e,i){let t=D(Ri,e,i);R(t.get("version")==1);let a=t.get("total_header_messages");for(var r=t.get("object_header_size"),n=i+B(Ri),s=e.slice(n,n+r),_=[[n,r]],d=0,l=0,o=new Array(a),c=0;c<a;c++){l>=r&&([n,r]=_[++d],l=0);let g=D(Ha,e,n+l),y=n+l+Ni;if(g.set("offset_to_message",y),g.get("type")==Oi){var[f,h]=v.unpack_from("<QQ",e,y);_.push([f,h])}l+=Ni+g.get("size"),o[c]=g}return[o,s,t]}_parse_v2_objects(e,i){var[t,a,r]=this._parse_v2_header(e,i);i=r;for(var n=[],s=t.get("size_of_chunk_0"),_=e.slice(i,i+=s),d=[[r,s]],l=0,o=0;;){if(o>=s-pt){let y=d[++l];if(y==null)break;[r,s]=y,o=0}let h=D(Ua,e,r+o),g=r+o+pt+a;if(h.set("offset_to_message",g),h.get("type")==Oi){var[c,f]=v.unpack_from("<QQ",e,g);d.push([c+4,f-4])}o+=pt+h.get("size")+a,n.push(h)}return[n,_,t]}_parse_v2_header(e,i){let t=D(Bi,e,i);var a;if(i+=B(Bi),R(t.get("version")==2),t.get("flags")&4?a=2:a=0,R((t.get("flags")&16)==0),t.get("flags")&32){let n=v.unpack_from("<4I",e,i);i+=16,t.set("access_time",n[0]),t.set("modification_time",n[1]),t.set("change_time",n[2]),t.set("birth_time",n[3])}let r=["<B","<H","<I","<Q"][t.get("flags")&3];return t.set("size_of_chunk_0",v.unpack_from(r,e,i)[0]),i+=v.calcsize(r),[t,a,i]}get_links(){return Object.fromEntries(this.iter_links())}*iter_links(){for(let e of this.msgs)e.get("type")==Rl?yield*this._iter_links_from_symbol_tables(e):e.get("type")==Il?yield this._get_link_from_link_msg(e):e.get("type")==Al&&(yield*this._iter_link_from_link_info_msg(e))}*_iter_links_from_symbol_tables(e){R(e.get("size")==16);let i=D(wl,this.fh,e.get("offset_to_message"));yield*this._iter_links_btree_v1(i.get("btree_address"),i.get("heap_address"))}*_iter_links_btree_v1(e,i){let t=new al(this.fh,e),a=new sl(this.fh,i);for(let r of t.symbol_table_addresses()){let n=new za(this.fh,r);n.assign_name(a),yield*Object.entries(n.get_links(a))}}_get_link_from_link_msg(e){let i=e.get("offset_to_message");return this._decode_link_msg(this.fh,i)[1]}_decode_link_msg(e,i){let[t,a]=v.unpack_from("<BB",e,i);i+=2,R(t==1);let r=2**(a&3),n=(a&2**3)>0,s=(a&2**4)>0,_=(a&2**2)>0,d;n?(d=v.unpack_from("<B",e,i)[0],i+=1):d=0,R([0,1].includes(d));let l;_&&(l=v.unpack_from("<Q",e,i)[0],i+=8);let o=0;s&&(o=v.unpack_from("<B",e,i)[0],i+=1);let c=o==0?"ascii":"utf-8",f=["<B","<H","<I","<Q"][a&3],h=v.unpack_from(f,e,i)[0];i+=r;let g=new TextDecoder(c).decode(e.slice(i,i+h));i+=h;let y;if(d==0)y=v.unpack_from("<Q",e,i)[0];else if(d==1){let E=v.unpack_from("<H",e,i)[0];i+=2,y=new TextDecoder(c).decode(e.slice(i,i+E))}return[l,[g,y]]}*_iter_link_from_link_info_msg(e){let i=e.get("offset_to_message"),t=this._decode_link_info_msg(this.fh,i),a=t.get("heap_address"),r=t.get("name_btree_address"),n=t.get("order_btree_address");r!=null&&(yield*this._iter_links_btree_v2(r,n,a))}*_iter_links_btree_v2(e,i,t){let a=new ol(this.fh,t),r,n=i!=null;n?r=new _l(this.fh,i):r=new nl(this.fh,e);let s=new Map;for(let d of r.iter_records()){let l=a.get_data(d.get("heapid")),[o,c]=this._decode_link_msg(l,0),f=n?o:c[0];s.set(f,c)}let _=Array.from(s.keys()).sort();for(let d of _)yield s.get(d)}_decode_link_info_msg(e,i){let[t,a]=v.unpack_from("<BB",e,i);R(t==0),i+=2,(a&1)>0&&(i+=8);let r=(a&2)>0?kl:ml,n=D(r,e,i),s=new Map;for(let[_,d]of n.entries())s.set(_,d==vt?null:d);return s}get is_dataset(){return this.find_msg_type(Li).length>0}get_data(){let i=this.find_msg_type(Mi)[0].get("offset_to_message");var[t,a,r,n]=this._get_data_message_properties(i);if(r==0)throw"Compact storage of DataObject not implemented";if(r==1)return this._get_contiguous_data(n);if(r==2)return this._get_chunked_data(i)}_get_data_message_properties(e){let i,t,a,[r,n,s]=v.unpack_from("<BBB",this.fh,e);return r==1||r==2?(i=n,t=s,a=e,a+=v.calcsize("<BBB"),a+=v.calcsize("<BI"),R(t==1||t==2)):(r==3||r==4)&&(t=n,a=e,a+=v.calcsize("<BB")),R(r>=1&&r<=4),[r,i,t,a]}_get_contiguous_data(e){let[i]=v.unpack_from("<Q",this.fh,e);if(i==vt){let n=this.shape.reduce(function(s,_){return s*_},1);return new Array(n)}var t=this.shape.reduce(function(n,s){return n*s},1);if(this.dtype instanceof Array){let n=this.dtype[0];if(n=="REFERENCE"){if(this.dtype[1]!=8)throw"NotImplementedError('Unsupported Reference type')";return this.fh.slice(i,i+t)}else if(n=="VLEN_STRING"){let _=this.dtype[2]==0?"ascii":"utf-8",d=new TextDecoder(_);for(var r=[],a=0;a<t;a++){let[o,c]=this._vlen_size_and_data(this.fh,i);r[a]=d.decode(c),i+=16}return r}else throw"NotImplementedError('datatype not implemented')"}else{let n=this.dtype;if(/[<>=!@\|]?(i|u|f|S)(\d*)/.test(n)){let[s,_,d]=Ve(n),l=new Array(t),o=new Ae(this.fh);for(var a=0;a<t;a++)l[a]=o[s](i+a*d,!_,d);return l}else throw"not Implemented - no proper dtype defined"}}_get_chunked_data(e){if(this._get_chunk_params(),this._chunk_address==vt)return[];var i=new rl(this.fh,this._chunk_address,this._chunk_dims);let t=i.construct_data_from_chunks(this.chunks,this.shape,this.dtype,this.filter_pipeline);if(this.dtype instanceof Array&&/^VLEN/.test(this.dtype[0])){let n=this.dtype[0];for(var a=0;a<t.length;a++){let[s,_,d]=t[a];var r;_ in this._global_heaps?r=this._global_heaps[_]:(r=new Si(this.fh,_),this._global_heaps[_]=r);let l=r.objects.get(d);if(n=="VLEN_STRING"){let c=this.dtype[2]==0?"ascii":"utf-8",f=new TextDecoder(c);t[a]=f.decode(l)}}}return t}_get_chunk_params(){if(!this._chunk_params_set){this._chunk_params_set=!0;var e=this.find_msg_type(Mi)[0],i=e.get("offset_to_message"),[t,a,r,n]=this._get_data_message_properties(i);if(r==2){var s;if(t==1||t==2){var _=v.unpack_from("<Q",this.fh,n)[0];s=n+v.calcsize("<Q")}else if(t==3){var[a,_]=v.unpack_from("<BQ",this.fh,n);s=n+v.calcsize("<BQ")}R(t>=1&&t<=3);var d="<"+(a-1).toFixed()+"I",l=v.unpack_from(d,this.fh,s);this._chunks=l,this._chunk_dims=a,this._chunk_address=_}}}};function vl(e,i){let t=v.unpack_from("<B",e,i)[0];var a;if(t==1)a=D(Mt,e,i),R(a.get("version")==1),i+=Ma;else if(t==2)a=D(Ot,e,i),R(a.get("version")==2),i+=Oa;else throw"InvalidHDF5File('unknown dataspace message version')";let r=a.get("dimensionality");return v.unpack_from("<"+(r*2).toFixed()+"I",e,i).filter(function(s,_){return _%2==0})}var vt=v.unpack_from("<Q",new Uint8Array([255,255,255,255,255,255,255,255]).buffer),Ba=new Map([["collection_address","Q"],["object_index","I"]]),$l=B(Ba),Na=new Map([["version","B"],["reserved","B"],["name_size","H"],["datatype_size","H"],["dataspace_size","H"]]),pl=B(Na),La=new Map([["version","B"],["flags","B"],["name_size","H"],["datatype_size","H"],["dataspace_size","H"],["character_set_encoding","B"]]),bl=B(La),Ri=new Map([["version","B"],["reserved","B"],["total_header_messages","H"],["object_reference_count","I"],["object_header_size","I"],["padding","I"]]),Bi=new Map([["signature","4s"],["version","B"],["flags","B"]]),Mt=new Map([["version","B"],["dimensionality","B"],["flags","B"],["reserved_0","B"],["reserved_1","I"]]),Ma=B(Mt),Ot=new Map([["version","B"],["dimensionality","B"],["flags","B"],["type","B"]]),Oa=B(Ot),Ha=new Map([["type","H"],["size","H"],["flags","B"],["reserved","3s"]]),Ni=B(Ha),Ua=new Map([["type","B"],["size","H"],["flags","B"]]),pt=B(Ua),wl=new Map([["btree_address","Q"],["heap_address","Q"]]),ml=new Map([["heap_address","Q"],["name_btree_address","Q"]]),kl=new Map([["heap_address","Q"],["name_btree_address","Q"],["order_btree_address","Q"]]),Fa=new Map([["version","B"],["space_allocation_time","B"],["fillvalue_write_time","B"],["fillvalue_defined","B"]]),El=B(Fa),Za=new Map([["version","B"],["flags","B"]]),yl=B(Za),Ca=new Map([["filter_id","H"],["name_length","H"],["flags","H"],["client_data_values","H"]]),zl=B(Ca),Li=1,Al=2,xl=3,Sl=5,Il=6,Mi=8,Tl=11,Dl=12,Oi=16,Rl=17,Bl=class St{constructor(i,t,a,r=!1){if(a==null?(this.parent=this,this.file=this):(this.parent=a,this.file=a.file),this.name=i,this._links=t.get_links(),this._dataobjects=t,this._attrs=null,this._keys=null,r)return new Proxy(this,Nl)}get keys(){return this._keys==null&&(this._keys=Object.keys(this._links)),this._keys.slice()}get values(){return this.keys.map(i=>this.get(i))}length(){return this.keys.length}_dereference(i){if(!i)throw"cannot deference null reference";let t=this.file._get_object_by_address(i);if(t==null)throw"reference not found in file";return t}get(i){if(typeof i=="number")return this._dereference(i);var t=Hi(i);if(t=="/")return this.file;if(t==".")return this;if(/^\//.test(t))return this.file.get(t.slice(1));if(Ml(t)!="")var[a,r]=t.split(/\/(.*)/);else var a=t,r=".";if(!(a in this._links))throw a+" not found in group";var n=Hi(this.name+"/"+a);let s=this._links[a];if(typeof s=="string")try{return this.get(s)}catch{return null}var _=new Ra(this.file._fh,s);if(_.is_dataset){if(r!=".")throw n+" is a dataset, not a group";return new Ll(n,_,this)}else{var d=new St(n,_,this);return d.get(r)}}visit(i){return this.visititems((t,a)=>i(t))}visititems(i){var t=this.name.length;/\/$/.test(this.name)||(t+=1);for(var a=this.values.slice();a;){let r=a.shift();a.length==1&&console.log(r);let n=r.name.slice(t),s=i(n,r);if(s!=null)return s;r instanceof St&&(a=a.concat(r.values))}return null}get attrs(){return this._attrs==null&&(this._attrs=this._dataobjects.get_attributes()),this._attrs}},Nl={get:function(e,i,t){return i in e?e[i]:e.get(i)}},Ql=class extends Bl{constructor(e,i){var t=new ll(e,0),a=t.offset_to_dataobjects,r=new Ra(e,a);super("/",r,null),this.parent=this,this._fh=e,this.filename=i||"",this.file=this,this.mode="r",this.userblock_size=0}_get_object_by_address(e){return this._dataobjects.offset==e?this:this.visititems(i=>{i._dataobjects.offset==e})}},Ll=class extends Array{constructor(e,i,t){super(),this.parent=t,this.file=t.file,this.name=e,this._dataobjects=i,this._attrs=null,this._astype=null}get value(){var e=this._dataobjects.get_data();return this._astype==null?e:e.astype(this._astype)}get shape(){return this._dataobjects.shape}get attrs(){return this._dataobjects.get_attributes()}get dtype(){return this._dataobjects.dtype}get fillvalue(){return this._dataobjects.fillvalue}};function Ml(e){let i="/",t=e.lastIndexOf(i)+1,a=e.slice(0,t),r=new RegExp("^"+i+"+$"),n=new RegExp(i+"$");return a&&!r.test(a)&&(a=a.replace(n,"")),a}function Hi(e){return e.replace(/\/(\/)+/g,"/")}export{Ll as Dataset,Ql as File,xi as Filters,Bl as Group};
/*! Bundled license information:

jsfive/dist/esm/index.mjs:
  (*! Bundled license information:
  
  pako/dist/pako.esm.mjs:
    (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
  *)
*/
